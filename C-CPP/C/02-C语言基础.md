# C语言基础

---
## 1 C语言的组成

- 一个C程序就是由若干头文件和函数组成。
- C语言的入口是main函数，有且只能有一个main函数

下面是一个简单的c语言程序

```c
#include <stdio.h>//声明标准的输入输出库
int main() {//C程序一定是从主函数开始执行的。
    printf("hello");//输出函数
    system("pause");//暂停语句
    return 0;
}
```

### include预处理

`include`是一条预处理命令，它的作用是**通知C语言编译系统在对C程序进行正式编译之前需做一些预处理工作**。`include <stdio.h>`表示引入标准的输入输出库。C语言里，每个源文件是一个模块，头文件为使用该模块的用户提供接口。接口是指一个功能模块暴露给其他模块用以访问具体功能的方法。使用源文件实现模块的功能，使用头文件暴露单元的接口。用户只需包含相应的头文件就可使用该头文件中暴露的接口。

通过头文件包含的方法将程序中的各功能模块联系起来有利于模块化程序设计:

1. 通过头文件调用库功能。在很多场合，源代码不便(或不准)向用户公布，只要向用户提供头文件和二进制库即可。用户只需按照头文件中的接口声明来调用库功能，而不必关心接口如何实现。编译器会从库中提取相应的代码。
2. 头文件能加强类型安全检查。若某个接口的实现或使用方式与头文件中的声明不一致，编译器就会指出错误。这一简单的规则能大大减轻程序员调试、改错的负担。

在预处理阶段，编译器将源文件包含的头文件内容复制到包含语句(#include)处。在源文件编译时，连同被包含进来的头文件内容一起编译，生成目标文件(.obj)。如果所包含的头文件非常庞大，则会严重降低编译速度(使用GCC的-E选项可获得并查看最终预处理完的文件)。因此，在源文件中应仅包含必需的头文件，且尽量不要在头文件中包含其它头文件。

**头文件语法**：

```c
#include <stdio.h>//这种语法表示，编译系统从存储c编译系统的子目录中去找所有要包含的文件，称为标准方式
#include "test.h"//这种语法表示，在编译的时候，先用户的当前目录进行查找，若找不到，则安装标准的方式查找
```

---
## 2 关键字

- `auto`：声明自动变量
- `break`：跳出当前循环
- `case`：开关语句分支
- `char `：声明字符型变量或函数返回值类型
- `const `：声明只读变量
- `continue`：结束当前循环，开始下一轮循环
- `default`：开关语句中的“其它”分支
- `define `: 宏定义
- `do`：循环语句的循环体
- `double `：声明双精度浮点型变量或函数返回值类型
- `else `：条件语句否定分支（与 if 连用）
- `enum `：声明枚举类型
- `extern`：声明变量或函数是在其它文件或本文件的其他位置定义
- `float`：声明浮点型变量或函数返回值类型
- `for`：一种循环语句
- `goto`：无条件跳转语句
- `if`:条件语句
- `int`： 声明整型变量或函数
- `long `：声明长整型变量或函数返回值类型
- `register`：声明寄存器变量
- `return `：子程序返回语句（可以带参数，也可不带参数）
- `short `：声明短整型变量或函数
- `signed`：声明有符号类型变量或函数
- `sizeof`：计算数据类型或变量长度（即所占字节数）
- `static `：声明静态变量
- `struct`：声明结构体类型
- `switch `:用于开关语句
- `typedef`：用以给数据类型取别名
- `unsigned`：声明无符号类型变量或函数
- `union`：声明共用体类型
- `void `：声明函数无返回值或无参数，声明无类型指针
- `volatile`：说明变量在程序执行中可被隐含地改变
- `while `：循环语句的循环条件
- `_Bool` ：c99 布尔类型

---
## 3 标识符

标识符其实就是在程序中自定义的名词，比如方法名，变量名。 c语言的标识符由`0-9、a-z、A-Z、_`组成。标识符有如下要求：

- 数字不可以开头。
- 不可以使用关键字。

标识符的长度最好**不要超过8位**，因为在某些版本的C中规定标识符前8位有效，当两个标识符前8位相同时，则被认为是同一个标识符。

---
## 4 注释

C语言只有两种注释

```c
//单行注释

/*
多行注释
*/
```

---
## 5 转义字符

如果在字符串字面值中要表示单引号和问号，既可以使用转义序列 `\'` 和 `\?`，也可以直接用字符`'`和`?`，而要表示`\`或"则必须使用转义序列，因为`\`字符表示转义而不表示它的字面含义，"表示字符串的界定符而不表示它的字面含义。可见转义序列有两个作用：一是把普通字符转义成特殊字符，例如把字母n转义成换行符；二是把特殊字符转义成普通字符，例如\和"是特殊字符，转义后取它的字面值。

1. `\'`单引号'（Single Quote或Apostrophe）
2. `\"`双引号"
3. `\?`问号?（Question Mark）
4. `\\`反斜线\（Backslash）
5. `\a`响铃（Alert或Bell）
6. `\b`退格（Backspace）
7. `\f`分页符（Form Feed）
8. `\n`换行（Line Feed）
9. `\r`回车（Carriage Return）\tHorizontal Tab
10. `\t` 水平制表符（）
11. `\v`垂直制表符（Vertical Tab）

---
## 6 声明和定义

C语言中的声明（Declaration）有`变量声明、函数声明、类型声明`三种。如果一个变量或函数的声明要求编译器为它分配存储空间，那么也可以称为定义（Definition），因此定义是声明的一种。与之对应的是类型声明（比如声明一个结构体），声明一个类型是不分配存储空间的。

---
## 7 表达式

常量和变量都可以参与加减乘除运算，例如`1+1、hour-1、hour * 60 + minute、minute/60`等。这里的`+ - * /`称为运算符（Operator），而参与运算的常量和变量称为操作数（Operand），上面四个由运算符和操作数所组成的算式称为表达式（Expression）。任何表达式都有值和类型两个基本属性。hour * 60 + minute的值是由三个int型的操作数计算出来的，所以这个表达式的类型也是int型。

---
## 8 左值与右值

左值（lvalue）是一个表达式，它表示一个可被标识的（变量或对象的）内存位置，并且允许使用&操作符来获取这块内存的地址。如果一个表达式不是左值，那它就被定义为右值。

```c
a * b = 42; // 编译错误， 说明 a * b 不是左值
int i = 42;
i = 43;
int* p = &i; // ok, i 是左值
int& foo();
foo() = 42; // ok, foo() 是左值
int* p1 = &foo(); // ok, foo() 是左值

int foobar();
int j = 0;
j = foobar(); // ok, foobar() 是右值
int* p2 = &foobar(); // 错误，不能获取右值的地址
j = 42; // ok, 42 是右值
```

具体参考 [快速了解C/C++的左值和右值](https://segmentfault.com/a/1190000003793498)