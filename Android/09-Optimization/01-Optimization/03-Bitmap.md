# Bitmap 优化

## 1 图片格式选择

- PNG
- JPEG
- WebP

## 2 图片加载与缓存

- 按需加载图片
- 图片的内存与磁盘缓存

## 3 图片的压缩

1. 质量压缩：compress，该压缩不减少像素
2. 尺寸压缩：canvas
3. 采样率压缩：inSampleSize
4. libjpeg
5. libjpeg-turbo，参考 [高性能图片压缩 —— libjpeg-turbo 的编译与集成](https://juejin.im/post/5cb1d6f7518825186d653aa7)

参考[Android图片压缩的几种方案](https://mp.weixin.qq.com/s/-ixGY5E34Fbsy0N3-XTk-Q?)

## 4 图像处理引擎

- 95年 JPEG处理引擎，用于最初的在PC上面处理图片的引擎。
- 05年 skia开源的引擎，基于JPEG处理引擎的二次开发。便于浏览器的使用。
- 07年 安卓上面用的什么引擎？skia引擎阉割版。谷歌拿了skia去掉一个编码算法——哈夫曼算法。采用定长编码算法。但是解码还是保留了哈夫曼算法。导致了图片处理后文件变大了。理由是：当时由于CPU和内存在手机上都非常吃紧 性能差，由于哈夫曼算法非常吃CPU，被迫用了其他的算法。

### 6 如何优化

绕过安卓Bitmap API层，来自己编码实现，采用修复使用哈夫曼算法。

### 7 编码类型

- 定长编码
- 加权信息编码
