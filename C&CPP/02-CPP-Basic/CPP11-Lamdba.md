# Lambda 函数与表达式

C++11 提供了对匿名函数的支持，称为 Lambda 函数(也叫 Lambda 表达式)。Lambda 表达式把函数看作对象。Lambda 表达式可以像对象一样使用，比如可以将它们赋给变量和作为参数传递，还可以像函数一样对其求值。

Lambda 表达式本质上与函数声明非常类似。Lambda 表达式具体形式是：

- `[capture](parameters)->return-type{body}`
- `[capture](parameters){body}` 没有返回值类型

示例：

```cpp
[](int x, int y){ return x < y ; }
[]{ ++global_x; }
[](int x, int y) -> int { int z = x + y; return z + x; }
```

在Lambda表达式内可以访问当前作用域的变量，这是Lambda表达式的闭包（Closure）行为。C++闭包变量传递有传值和传引用的区别。可以通过前面的[]来指定：

```cpp
[]                // 沒有定义任何变量。使用未定义变量会引发错误。
[x, &y]        // x以传值方式传入（默认），y以引用方式传入。
[&]             // 任何被使用到的外部变量都隐式地以引用方式加以引用。
[=]             // 任何被使用到的外部变量都隐式地以传值方式加以引用。
[&, x]         // x显式地以传值方式加以引用。其余变量以引用方式加以引用。
[=, &z]       // z显式地以引用方式加以引用。其余变量以传值方式加以引用。
```

对于*[=]或[&]*的形式，lambda 表达式可以直接使用 this 指针。但是，对于*[]*的形式，如果要使用 this 指针，必须显式传入：

```cpp
[this]() { this->someFunc(); }();
```
