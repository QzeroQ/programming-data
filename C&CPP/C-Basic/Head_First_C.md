# Head First C

## 1 C语言入门：进入 C 语言的世界

- C 语言旨在创建空间小、速度快的程序。它比其他大多数语言的抽象层次更低，也就是说用 C 语言写的代码更加接近机器语言。
- 计算机只理解一种语言——机器代码，即一串二进制0、1流。你可以在编译器的帮助下将C代码转化为机器代码。
- 为了写出速度快、空间小、可移植性高的程序，人们常使用 C 语言。绝大多数的操作系统、其他计算机语言和大多数游戏软件都是用C语言写的。

### main 函数

- C 语言是一种很小的语言，如果不使用外部库，它几乎什么也干不了。为了告诉编译器程序要使用哪些外部代码，需要包含（include）相关库的头文件。`stdio.h` 是最常见的头文件，stdio 库中包含了那些能在终端读写数据的代码。
- 所有的 C 代码都在函数中运行。对任何 C程序来讲，最重要的函数是`main()`函数。`main()`函数是程序中所有代码的起点。计算机会从`main()`函数开始运行程序。它的名字很重要：如果没有一个叫`main()`的函数，程序就无法启动。
- `main()`函数的返回类型是int。这是什么意思呢？当计算机在运行程序时，它需要一些方法来判断程序是否运行成功，计算机正是通过检查`main()`函数的返回值来做到这一点。如果让`main()`函数返回0，就表明程序运行成功；如果让它返回其他值，就表示程序在运行时出了问题。
- 在早期的 ANSI C 标准中，`main()`函数可以是void 类型。但是在 C99 标准中 main 函数的返回类型必须是 int。
- 如果想检查程序的退出状态，可以在 Windows 命令提示符中输入：`echo %ErrorLevel%`或在 Linux 或 Mac 终端中输入：`echo $?`
- `main()`这一函数的返回类型是 int，因此必须在函数结束前包含一条 return语句。即使不加，代码也能编译通过，但会收到编译器的警告。支持 C99 标准的编译器会在你忘记的时候插入一条 return 语句。如果你想让编译器遵循 C99 标准，可以使用`-std=99`选项。

### 运行程序

- C 语言是一种编译型语言，也就是说计算机不会直接解释代码，而是需要将给人阅读的源代码转化（或编译）为机器能够理解的机器代码，这样计算机才能够执行。
- 为了编译代码，需要一个叫编译器的程序。GNU 编译器套件（GNU  Compiler  Collection），也叫gcc，是最流行的C编译器之一。gcc 可以在很多操作系统中使用，而且除了C语言，它还可以编译很多其他语言，最重要的是，它是完全免费的。
- 在大部分机器中，可以用下面这个技巧来编译并运行代码：`gcc zork.c -o zork && ./zork`(在 Windows 中，应该输入 zork 而不是 ./zork)，这条命令只有在编译成功的情况下才会运行新程序，一旦编译过程中出了问题，它就会跳过运行程序这一步，仅仅在屏幕上显示错误消息。
- 为什么我在 Linux 和 Mac 中运行程序时必须在程序前加上`./`？因为在类 Unix 操作系统中，运行程序必须指定程序所在的目录，除非程序的目录已经列在了 PATH 环境变量中。

### C语言字符串

- C 语言不支持现成的字符串
- C 语言比其他大多数语言的抽象层次更低，因此它不提供字符串，而是用了相似的东西来代替：以字符为元素的数组。
- 字符串只是字符数组，当C语言看到一个这样的字符串时：`s = "Shatner"`，会把它当做一个数组读取，而这个数组是由一个个独立的字符组成的：`s = {'S', 'h', 'a', 't', 'n', 'e', 'r'}`。
- **哨兵字符**：C语言比大多数语言更低层，它无法确切地知道数组有多长，如果 C 语言想在屏幕上显示字符串，它就需要知道什么时候会到达字符数组的尾部，为此C语言加入了哨兵字符。哨兵字符是一个出现在字符串末尾的附加字符，它的值为 `\0`。每当计算机需要读取字符串的内容时，它会逐一扫描字符数组中的所有元素，直到碰到`\0`。
- `s = "Shatner"` 存储器中实际保存的是：`{'S', 'h', 'a', 't', 'n', 'e', 'r', '\0'}`。
- 为什么要设立哨兵字符？难道计算机就不知道字符串的长度吗？通常不知道。记录数组的长度不是C语言的强项，虽然编译器有时可以通过分析代码计算出数组的长度，但一般情况下，C 语言希望你来记录数组的长度，字符串其实就是个数组。
- 通常应该用双引号来定义字符串。用双引号定义的字符串叫字符串字面值（string  literal），比起字符数组，它输入起来也更方便。
- 字符串字面值和字符数组有没有区别？只有一个区别：字符串字面值是常量。也就是说这些字符一旦创建完毕，就不能再修改它们。如果修改它们就会遇到错误，具体什么错误取决于编译器，gcc 通常会显示总线错误（bus error）。
- **总线错误**：C语言采取不同的方式在存储器中保存字符串字面值。总线错误意味着程序无法更新那一块存储器空间。

### switch

- 我能在 switch 语句中检查字符串吗？不能用 switch 语句检查字符串或任何形式的数组，switch 语句只能检查值。

## 2 存储器和指针

如果真的想玩转C语言，就需要理解C语言如何操纵存储器。

### 指针

- 指针是理解C语言最基本的要素之一。那么什么是指针？指针就是存储器中某条数据的地址。
- 在C语言中使用指针有以下几个原因
  - 在函数调用时，可以只传递一个指针，而不用传递整份数据。
  - 让两段代码处理同一条数据，而不是处理两份独立的副本。
- 指针就做了两件事：避免副本和共享数据。

### 深入挖掘存储器
