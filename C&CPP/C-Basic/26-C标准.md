# C 标准

## C 标准库

C标准主要由两部分组成，一部分描述C的语法，另一部分描述C标准库。C标准库定义了一组标准头文件，每个头文件中包含一些相关的函数、变量、类型声明和宏定义。要在一个平台上支持C语言，不仅要实现C编译器，还要实现C标准库，这样的实现才算符合C标准。不符合C标准的实现也是存在的，例如很多单片机的C语言开发工具中只有C编译器而没有完整的C标准库。

C语言是一种通用的、面向过程式的计算机程序设计语言。C语言不但提供了丰富的库函数，还允许用户定义自己的函数。每个函数都是一个可以重复使用的模块，通过模块间的相互调用，有条不紊地实现复杂的功能。可以说C程序的全部工作都是由各式各样的函数完成的。

C 标准函数库（C standard library，缩写：libc）是在C语言程序设计中，所有匹配标准的头文件（head file）的集合，以及常用的函数库实现程序（如 I/O 输入输出和字符串控制）。标准函数库通常会随附在编译器上。因为 C 编译器常会提供一些额外的非 ANSI C 函数功能，所以某个随附在特定编译器上的标准函数库，对其他不同的编译器来说，是不兼容的。

**C 标准函数库头文件发展**：

1. ANSI C共包括 15 个头文件。
2. 1995年，Normative Addendum 1 （NA1）批准了3个头文件（iso646.h、wchar.h和wctype.h）增加到C标准函数库中。
3. C99标准增加了6个头文件（complex.h、fenv.h、inttypes.h、stdbool.h、stdint.h和tgmath.h）。
4. C11标准中又新增了5个头文件（stdalign.h、stdatomic.h、stdnoreturn.h、threads.h和uchar.h）。

至此，C标准函数库共有29个头文件，具体可以参考

- [维基百科：C标准函数库](https://zh.wikipedia.org/wiki/C%E6%A8%99%E6%BA%96%E5%87%BD%E5%BC%8F%E5%BA%AB)
- [cppreference-c-header](https://zh.cppreference.com/w/c/header)
- [C标准库研究](https://lellansin.wordpress.com/tutorials/c-standard-library/)
- [LinuxC一站式编程：第 25 章 C 标准库](https://akaedu.github.io/book/ch25.html)

## POSIX C 标准

参考：

- [C_POSIX_library](https://en.wikipedia.org/wiki/C_POSIX_library)
- [C_POSIX_library-CN](https://zh.wikipedia.org/zh-hans/C_POSIX_library)
- [opengroup posix heads](https://pubs.opengroup.org/onlinepubs/9699919799/idx/head.html)

解惑：

- [The GNU C Library和The Standard C Library有什么区别？或者说有什么关系？](https://www.zhihu.com/question/20712888)
- [ISO C 与 POSIX 的关系](https://blog.csdn.net/jmh1996/article/details/80459787)
- [聊聊我理解的ANSI C、ISO C、GNU C、POSIX C](https://segmentfault.com/a/1190000012461553)
- [开源世界旅行手册：第 48 章 Linux](https://i.linuxtoy.org/docs/guide/ch48.html)

## Linux：C 标准库和 glibc

在 Linux 平台上最广泛使用的 C 函数库是 glibc，其中包括 C 标准库的实现，几乎所有 C 程序都要调用 glibc 的库函数，所以 glibc 是 Linux 平台 C 程序运行的基础。glibc 提供一组头文件和一组库文件，最基本、最常用的 C 标准库函数和系统函数在 libc.so 库文件中，几乎所有C程序的运行都依赖于 libc.so，有些做数学计算的 C 程序依赖于 libm.so，多线程的C程序依赖于 libpthread.so。

当然 glibc 并不是 Linux 平台唯一的基础 C 函数库，也有人在开发别的 C 函数库，比如适用于嵌入式系统的 uClibc。

## Man Page

Man Page 是 Linux 开发最常用的参考手册，由很多页面组成，每个页面描述一个主题，这些页面被组织成若干个 Section。FHS（Filesystem Hierarchy Standard）标准规定了 ManPage 各 Section 的含义如下：

1. 1 用户命令，例如`ls(1)`
2. 2 系统调用，例如`_exit(2)`
3. 3 库函数，例如`printf(3)`
4. 4 特殊文件，例如`null(4)`描述了设备文件`/dev/null、/dev/zero`的作用
5. 5 系统配置文件的格式，例如`passwd(5)`描述了系统配置文件`/etc/passwd`的格式
6. 6 游戏
7. 7 其它杂项，例如`bash-builtins(7`)描述了 bash 的各种内建命令
8. 8 系统管理命令，例如`ifconfig(8)`

使用 Man Page 查看 C 标准库中的函数文档。

```shell
man 3 printf
```

Man Page中有些页面有重名，比如敲 man printf 命令看到的并不是 C 函数 printf，而是位于第 1 个 Section 的系统命令 printf，要查看位于第 3 个 Section 的 printf 函数应该敲 `man 3 printf`，也可以敲`man -k printf`命令搜索哪些页面的主题包含 printf 关键字。

## Windows

参考：

- [Windows 编程之路](https://lellansin.wordpress.com/tutorials/windows-%E7%BC%96%E7%A8%8B%E4%B9%8B%E8%B7%AF/)
- [docs.microsoft：c-runtime-library](https://docs.microsoft.com/en-us/cpp/c-runtime-library/c-run-time-library-reference?view=vs-2019)